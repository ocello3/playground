import{t as g,c as p,d as D}from"./tools.92acc7f7.js";import{p as e}from"./index.1af0f207.js";const R=()=>({status:"update",num:7,mMinRate:.005,mMaxRate:.01,originMRate:.015,g:.4,sizeRate:5,color:[[188,150,230],[216,180,226],[174,117,159]]}),y=R(),C=(t,o)=>{const r=o.pages[1];r.addInput(t,"originMRate",{step:.01,min:.01,max:.1}),r.addInput(t,"num",{step:1,min:2,max:15}),r.addMonitor(t,"status"),r.addButton({title:"orbit",label:"reset"}).on("click",()=>{t.status="reset"})},V=(t,o)=>{const{num:r,mMinRate:c,mMaxRate:u,originMRate:d}=t;return{attractors:Array.from(Array(r),(l,s)=>({v:new e.Vector().set(0,0),pos:(()=>{if(s===0)return new e.Vector().set(o*.5,o*.5);const a=Math.random()*o,m=Math.random()*o;return new e.Vector().set(a,m)})(),m:(()=>{if(s===0)return o*d;const a=o*c,m=o*u;return g.map(Math.random(),0,1,a,m)})(),f:new e.Vector().set(0,0),color:(()=>{const a=s%t.color.length;return t.color[a]})(),a:new e.Vector().set(0,0)}))}};V(y,100);const P=(t,o,r)=>{const{g:c,originMRate:u,status:d}=o;if(d==="reset")return o.status="update",V(o,r);const l={...t};return l.attractors=t.attractors.map((s,a,m)=>{const n={...s};return a===0&&(n.m=u*r),n.f=m.reduce((f,w,h)=>{if(h===a)return e.Vector.add(f,new e.Vector().set(0,0));const M=e.Vector.sub(w.pos,n.pos),b=e.Vector.normalize(M),v=e.Vector.mag(M),k=c*n.m*w.m/v,x=e.Vector.mult(b,k);return e.Vector.add(x,f)},new e.Vector().set(0,0)),n.a=e.Vector.div(n.f,n.m),n.v=e.Vector.add(s.v,n.a),n.pos=(()=>a===0?s.pos:e.Vector.add(s.pos,n.v))(),n}),l},B=(t,o,r)=>{const{attractors:c}=t,{sizeRate:u}=o;r.push(),r.noStroke();for(const d of c){r.push();const{pos:l,m:s,color:a}=d;r.fill(a[0],a[1],a[2]),r.circle(l.x,l.y,s*u),r.pop()}r.pop()},i={setParams:R,setGui:C,setData:V,updateData:P,draw:B},S=t=>{const o=g.setSize("sketch");let r=p.setController();const c=i.setParams();let u=i.setData(c,o);t.setup=()=>{t.createCanvas(o,o);const d=p.setGui(t,r,!1,!1);i.setGui(c,d),t.noLoop()},t.draw=()=>{t.background(33,11,44,200),p.updateController(t,r),u=i.updateData(u,c,o),i.draw(u,c,t),D(t,o),p.updateController(t,r)}};export{S as sketch};
