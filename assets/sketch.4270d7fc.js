import{s as x,D as A,t as m,c as u,d as P}from"./tools.88b38d76.js";import{p as v}from"./index.28ccc2d8.js";const g=(t,s=null,n,e)=>{const r=[],a=s===null?t:t[s],o=e<a.length?e:a.length-1,O=(()=>n===null?a.length:o+n>a.length?a.length-o:n)();return a.slice(o,o+O).forEach((d,p)=>{const f=`- index: ${p+o} -<br>`,D=L(d,n,e);r.push(f.concat(...D))}),r},L=(t,s,n)=>{const e=[];for(const r in t)if(Array.isArray(t[r])){e.push(`** ${r}: **<br>`);const a=g(t,r,s,n);e.push(...a)}else e.push(`${r}: ${t[r]}<br>`);return e},w=(t,s,n)=>{const e=[];if(Array.isArray(t)){const r=g(t,null,s,n);e.push(...r)}else{const r=L(t,s,n);e.push(...r)}return e},G=(t,s=null,n=0)=>{const e="// debug result<br>",r=w(t,s,n);document.getElementById("debug").innerHTML=e.concat(...r)},h=()=>({rate:.5}),S=h(),$=(t,s)=>{s.pages[1].addInput(t,"rate",{step:.1,min:.1,max:1})},y=(t,s)=>{const{rate:n}=t;return{radius:s*.5*n,center:new v.Vector().set(s*.5,s*.5)}};y(S,100);const I=(t,s,n)=>{const{rate:e}=s,r={...t};return r.radius=n*.5*e,r},j=(t,s)=>{const{radius:n,center:e}=t;s.push(),s.circle(e.x,e.y,n),s.pop()},c={setParams:h,setGui:$,setData:y,updateData:I,draw:j},V=()=>({maxVolume:-10}),_=(t,s)=>{s.pages[2].addInput(t,"maxVolume",{step:1,min:-60,max:0})},k=()=>{const t=new x(400,"sine","square");return t.mute=!0,t.toDestination().start(),A.mute=!0,t},b=()=>({oscillator:k()});b();const q=(t,s,n,e)=>{const r=m.map(t.radius,0,e*.5,-30,n.maxVolume),a=m.map(t.radius,0,e*.5,100,600);s.oscillator.volume.value=r,s.oscillator.frequency.value=a},i={setParams:V,setGui:_,setSynth:b,playSynth:q},B=t=>{const s=m.setSize("sketch");let n=u.setController();const e=c.setParams(),r=i.setParams();let a=c.setData(e,s),o=i.setSynth();t.setup=()=>{t.createCanvas(s,s);const l=u.setGui(t,n,!0,!1);c.setGui(e,l),i.setGui(r,l),t.noLoop()},t.draw=()=>{G(a),t.background(255),u.updateController(t,n),a=c.updateData(a,e,s),c.draw(a,t),P(t,s),i.playSynth(a,o,r,s)}};export{B as sketch};
