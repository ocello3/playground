import{b as o,W as h,T as n,o as i,G as s,S as c,r,e as a}from"./tools-c504d83d.js";class p extends o{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new h({context:this.context,mapping:t=>Math.abs(t)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class e extends n{constructor(){super(Object.assign(i(e.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new p({context:this.context}),this.a=new s({context:this.context,gain:0}),this.b=new s({context:this.context,gain:0}),this.output=new s({context:this.context}),this._internalChannels=[this.a,this.b];const t=i(e.getDefaults(),arguments,["fade"]);this.fade=new c({context:this.context,units:"normalRange",value:t.fade}),r(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",a(this._split,this.a.gain,0),a(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(n.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}export{e as C};
